<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<base target="_blank" />
<title>The Eggonomics Board Game</title>
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<style>
.TwoColumn {
  display: grid;
  grid-template-columns: repeat(2, max-content);
}
a {
  color: midnightblue;
}
code {
  font-size: 80%;
  background-color: #eee;
}
.tooltip {
  visibility: hidden;
  position: absolute;
  z-index: 1;
  background-color: #ddd;
  border: 2px solid black;
  font-size: 16pt;
}
.display {
  visibility: visible;
}
.tooltipText {
  text-decoration: underline;
  color: midnightblue;
  cursor: pointer;
}
</style>
</head>
<body>
<div class="TwoColumn">
  <h1>The Eggonomics Board Game</h1>
  <img src="/EggLogoV3.png" style="height: 80px; width: auto;" />
</div>
<hr />
<div class="TwoColumn">
  <div style="width: 80ch; font-size: 16pt;">
    <b>Hail traveler!</b> If you're reading this, you may be looking for
    <span style="text-decoration: underline;">The Eggonomics Board Game</span>,
    or, more specifically, its fourth iteration. Well, you're
    <abbr title="about to enter the seventh circle of hell"> in luck</abbr>! Just
    follow these steps to install the requisite content and you'll be playing
    Soon<sup style="font-size: 60%;">TM</sup>
    <ol style="margin: 0px auto 0px auto;" start="0">
      <li>
        Before anything else, make sure that you and your squadmates have been
        granted express written permission to the assets utilized in
        <span style="text-decoration: underline;">The Eggonomics Board Game</span>.
        To do so, you can email: <code>${developerEmail}</code>.
        Important note: you must have a <em>valid</em>
        <a href="https://myaccount.google.com/">Google Account</a>
        in order to gain access.
      </li>
      <li>
        With that out of the way, head over to
        <a href="https://script.google.com/home/projects/1tI0Sq9o83T5QAyx8UaKhVQ0zIKo1QjsoXvtk2sG71D8Ingrrxz9visUg">
          the Google Apps Script project</a>.
      </li>
      <li>
        Go to the <code>Editor</code> tab (on the left, the little <code>&lt;&gt;</code> sign).
        Hit the <code>&#11166;Run</code> button to execute the <code>newUsersPleaseRunThis()</code> function.
        There will be a pop-up saying something about <code>Authorization required</code>.
        Click <code>Review permissions</code>, sign in with your Google Account, 
        click <code>Continue</code>, and finally click <code>Allow</code>.
      </li>
      <li>
        Somewhere near the top right, there's a button that says <code>Use legacy editor</code>.
        Click that, exit the pop-up that displays, then click <code>Dismiss</code>
        on the second pop-up. At the top of the editor, hit the <code>Publish</code>
        button, then select <code>Deploy from manifest...</code> from the dropdown menu.
        In the center of the new pop-up, select <code>Install add-on</code> to
        enable the Google Workspace Add-on. Important note: do <em>not</em> hit
        the red <code>Create</code> button at the top; doing so could have
        unintended consequences.
      </li>
      <li>
        Now it's time for some spreadsheet shenanigans. Go to the
        <a href="https://docs.google.com/spreadsheets/d/1ZwjHj7uTM4KLqy7jkW8ADDMuBtVwCJSYQpn_2wZg8NA/edit">
          Eggonomics Financial Template</a>.
      </li>
      <li>
        Hit <code>File</code> (top left), then <code>Make a copy</code>. Under the
        <code>Folder</code> option, put the spreadsheet somewhere in your
        <a href="https://drive.google.com/drive">Google Drive</a> where your
        squadmates will be able to access and edit it (i.e. a folder shared with
        them as editors). Important note: only one group member has to do this step.
      </li>
      <li>
        In the new spreadsheet copy, add your Google Account email address
        (Gmail) to the top row of each sheet; it must be in the <em>exact</em>
        same location (column and row) on both, and must be adjacent to another
        address on the left. On the <code>Transactions</code> sheet, below the address you
        just entered, paste the contents copied by
        <span id="copy-formula-text" class="tooltipText">clicking this text</span>.
        If not already done so, add EggBank as a separate player in the same
        manner as described above.
      </li>
      <li>
        Select the Eggonomics icon from the side panel
        (if the side panel is hidden, there's a small left-facing arrow in the
        bottom right to show it). Wait for the add-on to load; if it doesn't seem to
        be doing anything, press <code>ctrl + F5</code> to perform a cache refresh.
      </li>
      <li>
        The app will (yet again) ask for permissions.
      </li>
      <li>
        At this point everything is effectively ready; simply click on the
        <code>Open webapp</code> button to bring up the central user interface.
        This is where all in-game actions will be performed; there's no need to further
        interact with the underlying spreadsheet, it's only there for backend reasons.
      </li>
    </ol>
    That's <abbr title="probably, hopefully">basically</abbr> it! A brand new
    <em>egg</em>sperience awaits you in
    <span style="text-decoration: underline;">The Eggonomics Board Game</span>.
    If and when technical developments occur, they'll be listed in the changelog
    on the right.
  </div>
  <div style="width: 40ch; font-size: 16pt;">
    <span style="font-size: 32px;">Changelog</span>
    <ul style="margin: 0px auto 0px auto;">
      <li>
        <b>2021-09-17</b> Implement stock price calculations in Teal.
      </li>
      <li>
        <b>2021-08-22</b> Switch database to KeyDB (multithreaded Redis fork).
      </li>
      <li>
        <b>2021-08-17</b> Load modules ReJSON and RediSearch.
      </li>
      <li>
        <b>2021-08-06</b> Spin up the Redis database.
      </li>
      <li>
        <b>2021-08-01</b> Enable SSL on Apache HTTPD.
      </li>
      <li>
        <b>2021-07-30</b> Ditch the Deta Micro in favor of an Oracle compute
        instance.
      </li>
      <li>
        <b>2021-07-25</b> Migrate the webapp from a standalone application to a
        Google Workspace Add-on.
      </li>
      <li>
        <b>2021-07-22</b> Shift back to Google Apps Script for V4 development.
      </li>
      <li>
        <b>2021-07-10</b> Add Deta Micro to handle stock price backend.
      </li>
      <li>
        <b>2021-06-21</b> Finalize script for V3 playtest.
      </li>
    </ul>
  </div>
</div>
<script>
const formulaText = `=SUM(INDIRECT(CONCATENATE(ADDRESS(ROW()+1,COLUMN(),4),\
":",REGEXEXTRACT(ADDRESS(ROW(),COLUMN(),4),"[A-Z]+"))))`;
/** @type HTMLSpanElement */
var copyFormulaTooltip;
/** @type number */
var copyFormulaTooltipSetTimeoutHandle;
(function () {
  copyFormulaTooltip = document.createElement("span");
  copyFormulaTooltip.classList.add("tooltip");
  copyFormulaTooltip.innerText = "Copied!";
  document.getElementById("copy-formula-text").addEventListener("click", copyFormula);
}) ();
/**
 * Copy the Google Sheets formula
 * @param {MouseEvent} event The mouse click event
 */
function copyFormula(event) {
  navigator.clipboard.writeText(formulaText);
  copyFormulaTooltip.style.visibility = "visible";
  copyFormulaTooltip.style.left = `${event.pageX}px`;
  copyFormulaTooltip.style.top = `${event.pageY}px`;
  document.body.append(copyFormulaTooltip);
  clearTimeout(copyFormulaTooltipSetTimeoutHandle);
  copyFormulaTooltipSetTimeoutHandle = setTimeout(function () {
    copyFormulaTooltip.remove();
  }, 2000);
}
</script>
</body>
</html>
