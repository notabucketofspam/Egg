<app-trade-offer [price]="state.price"></app-trade-offer>
<app-public-work [pw]="state.pw" (raiseEE)="raisePublicWork($event)"></app-public-work>
<app-cash (reportEE)="reportPledge($event)" [localSubjects]="localSubjects"
[cart]="cart" [user]="user" [stateSubjects]="stateSubjects" [state]="state"></app-cash>
<app-cart [cart]="cart" (cartEE)="removeItem($event)" [price]="state.price" [cartTotal]="cartTotal"></app-cart>
<app-round [round]="state.round" (readyEE)="ready($event)" [ready]="state.ready" [user]="this.user"
[users]="state.users" [roundSubject]="stateSubjects['round']" [readySubject]="stateSubjects['ready']"></app-round>
<div class="Flex Row">
  <h1 class="Ultra">Eggonomics</h1>
  <img src="/assets/EggLogoV3.png" style="height: 80px; width: auto;">
  <div class="Flex ColumnReverse">
    <b>Game: {{ game }}</b>
    <b>User: {{ user }}</b>
  </div>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <div class="Flex ColumnReverse">
    <button routerLink="">Exit</button>
  </div>
</div>
<div *ngIf="!connected; else connectedTemplate">
  <div *ngFor="let message of messages">{{ message }}<br /></div>
  <button routerLink="">Exit</button>
</div>
<ng-template #connectedTemplate>
  <div *ngIf="value.err; else conglomeratesTemplate">
    <div *ngFor="let message of messages">{{ message }}<br /></div>
    <div [ngSwitch]="value.err">
      <div *ngSwitchCase="'ENOGAME'">
        <button routerLink="">Exit</button>
      </div>
      <div *ngSwitchCase="'ENOUSER'">
        <button (click)="addUser()">Add user</button>
      </div>
      <div *ngSwitchDefault>
        <b>GENERIC ERROR</b>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #conglomeratesTemplate>
  <div class="Flex Grid">
    <app-conglomerate *ngFor="let con of conglomerates" [conglomerate]="con[0]" class="Con" [cart]="cart"
                      [state]="state" [description]="con[1]" [user]="user" (cartBubbleEE)="addCartItem($event)"
                      [localSubjects]="localSubjects"></app-conglomerate>
  </div>
</ng-template>
<br />
<br />
